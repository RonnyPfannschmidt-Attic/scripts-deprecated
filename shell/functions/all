VCS=(
    hg "hg pull -u"
    git "git pull"
    svn "svn up"
)

update_one() {
    for vcs upcmd in $VCS
    do
        if [ -d ".$vcs" ]
        then
            echo updating $PWD:t
            eval ${upcmd}
            break
        fi
    done
}

update() {
    if [ -d .hg -o -d .git -o -d .svn ]
    then
        update_one
    else
        for dir in ./*/
        do
            (cd $dir && update_one) || break
        done
    fi
}
