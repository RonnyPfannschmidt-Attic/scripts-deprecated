declare -A VCS
VCS=(
    [hg]="hg pull -u"
    [git]="git pull"
    [svn]="svn up"
    )

update_one() {
    for vcs in "${!VCS[@]}"
    do
        if [ -d ".$vcs" ]
        then
            echo updating $(basename $PWD)
            ${VCS[$vcs]}
            break
        fi
    done
}

update() {
    if [ -d .hg -o -d .git -o -d .svn ]
    then
        update_one
    else
        for dir in */
        do
            (cd $dir && update_one) || break
        done
    fi
}
