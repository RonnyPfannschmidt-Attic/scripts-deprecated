
alias pypy=/home/ronny/Projects/pypy/pypy/pypy/translator/goal/pypy-c
alias pypy-bin=/home/ronny/Projects/pypy/pypy-bin/bin/pypy
alias pypy3-bin=/home/ronny/Projects/pypy/pypy3-bin/bin/pypy

PYPYS=(
    pypy-bin trunk/pypy-c-jit-latest-linux64.tar.bz2
    pypy3-bin py3k/pypy-c-nojit-latest-linux.tar.bz2
)

function translate {
    PYTHONPATH=.:/home/ronny/Projects/pypy/pypy:$PYTHONPATH \
        /home/ronny/Projects/pypy/pypy-bin/bin/pypy \
        /home/ronny/Projects/pypy/pypy/pypy/translator/goal/translate.py "$@"
}

function _update_a_pypy_bin { # name url
    local NAME=~/Projects/pypy/$1
    print $NAME
    [ -d $NAME ] || mkdir $NAME
    pushd $NAME || exit 1
    wget http://buildbot.pypy.org/nightly/$2
    rm -rf bin include lib*
    tar xf pypy-c-*.bz2 --strip-components=1
    rm pypy-c*.bz2
    popd

}


function develop_installs {
    local PYTHON=$1
    shift
    for arg
    do
        pushd $arg
        if [[ -f setup.py ]]
        then
            $PYTHON setup.py develop
        fi
        popd
    done
}

function pypy-bin-develop-installs {
    develop_installs \
        /home/ronny/Projects/pypy/pypy-bin/bin/pypy \
        /home/ronny/Projects/pypa/distribute \
        /home/ronny/Projects/pypy/cffi \
        /home/ronny/Projects/codespeak/py \
        /home/ronny/Projects/codespeak/pytest \
        /home/ronny/Projects/codespeak/execnet \
        /home/ronny/Projects/codespeak/pytest-xdist \
        /home/ronny/Projects/codespeak/pytest-cache 
}


function update-pypy-bin {
    _update_a_pypy_bin pypy-bin trunk/pypy-c-jit-latest-linux64.tar.bz2
    pypy-bin-develop-installs
}

function update-pypy3-bin {
    _update_a_pypy_bin pypy3-bin py3k/pypy-c-nojit-latest-linux.tar.bz2
}

function jitviewer {
    PYTHONPATH=~/Projects/pypy/pypy:~/Projects/pypy/jitviewer \
        ~/Projects/pypy/pypy-bin/bin/pypy ~/Projects/pypy/jitviewer/bin/jitviewer.py "$@"
}

